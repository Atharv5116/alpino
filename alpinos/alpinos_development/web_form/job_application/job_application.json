{
 "allow_comments": 1,
 "allow_delete": 0,
 "allow_edit": 0,
 "allow_incomplete": 0,
 "allow_multiple": 0,
 "allow_print": 0,
 "anonymous": 0,
 "apply_document_permissions": 0,
 "client_script": "\n// Ensure job_requisition from URL parameter job_title is set in form data\n(function() {\n    const urlParams = new URLSearchParams(window.location.search);\n    const jobTitle = urlParams.get('job_title');\n    const sourceParam = urlParams.get('source');\n    \n    if (!jobTitle && !sourceParam) return;\n    \n    const sourceMap = {\n        'linkedin': 'LinkedIn',\n        'indeed': 'Indeed',\n        'naukari.com': 'Naukari.com',\n        'naukari': 'Naukari.com',\n        'naukri.com': 'Naukri.com',\n        'naukri': 'Naukri.com'\n    };\n    const sourceValue = sourceParam ? (sourceMap[sourceParam.toLowerCase()] || sourceParam) : null;\n    \n    if (jobTitle) {\n        console.log('\ud83d\udd0d Found job_title in URL:', jobTitle);\n    }\n    if (sourceValue) {\n        console.log('\ud83d\udd0d Found source in URL:', sourceValue);\n    }\n    \n    // Simple DOM-based approach - find input by name\n    function setFieldValue() {\n        // Find the input field for job_requisition\n        const $input = $('input[data-fieldname=\"job_requisition\"]');\n        \n        if (!$input.length) {\n            console.log('\u23f3 Input field not found yet...');\n            return false;\n        }\n        \n        console.log('\u2705 Found input field, setting value...');\n        \n        // Set the value\n        $input.val(jobTitle);\n        $input.trigger('change');\n        $input.trigger('input');\n        \n        console.log('\u2705 Value set to:', jobTitle);\n        \n        // Set in frappe.web_form.doc if available\n        if (frappe.web_form && frappe.web_form.doc) {\n            frappe.web_form.doc.job_requisition = jobTitle;\n            console.log('\u2705 Set in doc');\n        }\n        \n        // Make read-only after setting\n        setTimeout(function() {\n            $input.prop('readonly', true);\n            $input.attr('disabled', 'disabled');\n            $input.css({\n                'background-color': '#f5f5f5',\n                'cursor': 'not-allowed',\n                'pointer-events': 'none'\n            });\n            \n            // Hide link button if exists\n            $input.closest('.frappe-control').find('.link-btn').hide();\n            \n            console.log('\u2705 Made read-only');\n        }, 300);\n        \n        return true;\n    }\n    \n    // Wait for DOM to be ready\n    $(document).ready(function() {\n        console.log('\ud83d\udcc4 DOM ready, waiting for field...');\n        \n        // Try immediately\n        setTimeout(setFieldValue, 1000);\n        \n        // Retry multiple times\n        let attempts = 0;\n        const retry = setInterval(function() {\n            attempts++;\n            if (setFieldValue() || attempts >= 15) {\n                clearInterval(retry);\n                if (attempts >= 15) {\n                    console.log('\u274c Failed to find field after 15 attempts');\n                }\n            }\n        }, 500);\n    });\n    \n    // Also try with frappe.ready\n    frappe.ready(function() {\n        setTimeout(setFieldValue, 1000);\n    });\n    \n    // Ensure value is set before submit\n    $(document).on('submit', '.web-form', function() {\n        const $input = $('input[data-fieldname=\"job_requisition\"]');\n        if ($input.length && !$input.val()) {\n            $input.val(jobTitle);\n        }\n        if (frappe.web_form && frappe.web_form.doc) {\n            frappe.web_form.doc.job_requisition = jobTitle;\n        }\n        console.log('\u2705 Ensured value before submit');\n    });\n})();\n\n// Resume file type validation (PDF and Word only)\n$(document).ready(function() {\n    // Function to validate resume file\n    function validateResumeFile(fileInput) {\n        if (!fileInput || !fileInput.files || fileInput.files.length === 0) {\n            return { valid: false, message: 'No file selected' };\n        }\n        \n        const file = fileInput.files[0];\n        const fileName = file.name.toLowerCase();\n        \n        // Allowed extensions\n        const allowedExtensions = ['.pdf', '.doc', '.docx'];\n        \n        // Get file extension\n        const lastDotIndex = fileName.lastIndexOf('.');\n        if (lastDotIndex === -1) {\n            return { valid: false, message: 'File has no extension' };\n        }\n        \n        const fileExtension = fileName.substring(lastDotIndex);\n        \n        // Check if extension is allowed\n        if (!allowedExtensions.includes(fileExtension)) {\n            return {\n                valid: false,\n                message: 'Resume/CV must be a PDF or Word document (.pdf, .doc, .docx).<br>Current file: ' + file.name + '<br>Extension: ' + fileExtension\n            };\n        }\n        \n        // Check file size (max 5MB)\n        const maxSize = 5 * 1024 * 1024; // 5MB in bytes\n        if (file.size > maxSize) {\n            return {\n                valid: false,\n                message: 'Resume/CV file size must not exceed 5 MB.<br>Current file size: ' + (file.size / (1024 * 1024)).toFixed(2) + ' MB'\n            };\n        }\n        \n        // Also check MIME type for extra security\n        const allowedMimeTypes = [\n            'application/pdf',\n            'application/msword',\n            'application/vnd.openxmlformats-officedocument.wordprocessingml.document'\n        ];\n        \n        if (!allowedMimeTypes.includes(file.type)) {\n            return {\n                valid: false,\n                message: 'Invalid file type detected.<br>File: ' + file.name + '<br>Type: ' + file.type + '<br>Only PDF and Word documents are allowed.'\n            };\n        }\n        \n        return { valid: true, message: 'Valid file: ' + file.name };\n    }\n    \n    // Multiple selectors to catch file input in web forms\n    const selectors = [\n        'input[data-fieldname=\"resume_attachment\"]',\n        'input[name=\"resume_attachment\"]',\n        'input[type=\"file\"][data-fieldname=\"resume_attachment\"]',\n        '.frappe-control[data-fieldname=\"resume_attachment\"] input[type=\"file\"]',\n        'input.input-with-feedback[data-fieldname=\"resume_attachment\"]'\n    ];\n    \n    console.log('\ud83d\udd0d Setting up resume validation handlers...');\n    \n    // Attach to all possible selectors\n    selectors.forEach(selector => {\n        $('body').off('change', selector).on('change', selector, function(e) {\n            console.log('\ud83d\udcce File selected via selector:', selector);\n            \n            const file = this.files[0];\n            if (!file) {\n                console.log('\u26a0\ufe0f No file selected');\n                return;\n            }\n            \n            console.log('File details:', {\n                name: file.name,\n                type: file.type,\n                size: file.size\n            });\n            \n            const result = validateResumeFile(this);\n            console.log('Validation result:', result);\n            \n            if (!result.valid) {\n                console.log('\u274c File validation FAILED:', result.message);\n                \n                // Clear the file input immediately\n                $(this).val('');\n                this.value = '';\n                if (this.files) {\n                    // Try to clear files array (some browsers)\n                    try {\n                        const dt = new DataTransfer();\n                        this.files = dt.files;\n                    } catch (err) {\n                        console.log('Could not clear files array:', err);\n                    }\n                }\n                \n                // Show error message\n                frappe.msgprint({\n                    title: __('Invalid File'),\n                    message: __(result.message),\n                    indicator: 'red'\n                });\n                \n                e.preventDefault();\n                e.stopPropagation();\n                e.stopImmediatePropagation();\n                return false;\n            }\n            \n            console.log('\u2705 Resume file validated:', result.message);\n        });\n    });\n    \n    console.log('\u2705 Resume validation handlers attached');\n    \n    // Validate existing attached file on page load\n    setTimeout(function() {\n        const resumeInput = $('input[data-fieldname=\"resume_attachment\"]')[0];\n        if (resumeInput) {\n            // Check if there's an existing file URL (already attached file)\n            const existingFileUrl = $(resumeInput).attr('data-file-url') || frappe.web_form?.doc?.resume_attachment;\n            \n            if (existingFileUrl) {\n                console.log('\ud83d\udd0d Found existing attached file:', existingFileUrl);\n                \n                // Extract filename from URL\n                const urlParts = existingFileUrl.split('/');\n                const fileName = urlParts[urlParts.length - 1].toLowerCase();\n                const fileExtension = fileName.substring(fileName.lastIndexOf('.'));\n                \n                console.log('Existing file extension:', fileExtension);\n                \n                const allowedExtensions = ['.pdf', '.doc', '.docx'];\n                \n                if (!allowedExtensions.includes(fileExtension)) {\n                    console.log('\u274c Existing file has invalid extension:', fileExtension);\n                    \n                    // Clear the attachment\n                    $(resumeInput).val('');\n                    $(resumeInput).attr('data-file-url', '');\n                    if (frappe.web_form && frappe.web_form.doc) {\n                        frappe.web_form.doc.resume_attachment = '';\n                    }\n                    \n                    // Remove the file display\n                    $(resumeInput).closest('.frappe-control').find('.attached-file').remove();\n                    $(resumeInput).closest('.frappe-control').find('.attached-file-link').remove();\n                    \n                    // Show warning\n                    frappe.msgprint({\n                        title: __('Invalid Resume File Removed'),\n                        message: __('The previously attached file was not a valid PDF or Word document and has been removed.<br>File: ' + fileName + '<br>Please upload a PDF or Word document (.pdf, .doc, .docx).'),\n                        indicator: 'orange'\n                    });\n                } else {\n                    console.log('\u2705 Existing file is valid:', fileName);\n                }\n            }\n        }\n    }, 2000); // Wait 2 seconds for page to fully load\n    \n    // 2. Phone Number Validation\n    let phoneValidated = false;\n    $(document).off('blur', 'input[data-fieldname=\"phone_number\"]').on('blur', 'input[data-fieldname=\"phone_number\"]', function() {\n        if (phoneValidated) {\n            phoneValidated = false;\n            return;\n        }\n        phoneValidated = true;\n        \n        const phone = $(this).val().trim();\n        if (!phone) {\n            phoneValidated = false;\n            return; // Skip if empty\n        }\n        \n        // Remove spaces, hyphens, parentheses for validation\n        const cleanPhone = phone.replace(/[\\s\\-\\(\\)]/g, '');\n        \n        // Check if it contains only digits and +\n        if (!/^[\\+]?[0-9]+$/.test(cleanPhone)) {\n            frappe.msgprint({\n                title: __('Invalid Phone Number'),\n                message: __('Phone number can only contain numbers, spaces, +, -, ( )'),\n                indicator: 'red'\n            });\n            phoneValidated = false;\n            return;\n        }\n        \n        // Check minimum length (at least 10 digits)\n        const digitsOnly = cleanPhone.replace(/\\+/g, '');\n        if (digitsOnly.length < 10) {\n            frappe.msgprint({\n                title: __('Invalid Phone Number'),\n                message: __('Phone number must be at least 10 digits'),\n                indicator: 'red'\n            });\n            phoneValidated = false;\n            return;\n        }\n        \n        phoneValidated = false;\n    });\n    \n    // 3. Name Validation\n    $(document).on('blur', 'input[data-fieldname=\"applicant_name\"]', function() {\n        const name = $(this).val().trim();\n        if (!name) return;\n        \n        // Check minimum 2 characters\n        if (name.length < 2) {\n            frappe.msgprint({\n                title: __('Invalid Name'),\n                message: __('Name must be at least 2 characters'),\n                indicator: 'red'\n            });\n            $(this).focus();\n            return;\n        }\n        \n        // Check for numbers or invalid special characters\n        if (/[0-9@#$%^&*()_+=\\[\\]{};:\"\\|,.<>\\/?]/.test(name)) {\n            frappe.msgprint({\n                title: __('Invalid Name'),\n                message: __('Name cannot contain numbers or special characters (except spaces, hyphens, apostrophes)'),\n                indicator: 'red'\n            });\n            $(this).focus();\n            return;\n        }\n        \n        // Check if only whitespace\n        if (!/[a-zA-Z]/.test(name)) {\n            frappe.msgprint({\n                title: __('Invalid Name'),\n                message: __('Name must contain at least one letter'),\n                indicator: 'red'\n            });\n            $(this).focus();\n            return;\n        }\n    });\n    \n    // 5. Experience Validation\n    $(document).on('blur', 'input[data-fieldname=\"total_experience\"]', function() {\n        const experience = parseFloat($(this).val());\n        if (isNaN(experience)) return;\n        \n        if (experience < 0) {\n            frappe.msgprint({\n                title: __('Invalid Experience'),\n                message: __('Total Experience cannot be negative'),\n                indicator: 'red'\n            });\n            $(this).val('0');\n            return;\n        }\n        \n        if (experience > 50) {\n            frappe.msgprint({\n                title: __('Invalid Experience'),\n                message: __('Total Experience cannot exceed 50 years'),\n                indicator: 'red'\n            });\n            $(this).focus();\n            return;\n        }\n    });\n    \n    // Current CTC validation\n    $(document).on('blur', 'input[data-fieldname=\"employment_current_ctc\"]', function() {\n        const ctc = parseFloat($(this).val());\n        if (isNaN(ctc)) return;\n        \n        if (ctc < 0) {\n            frappe.msgprint({\n                title: __('Invalid CTC'),\n                message: __('Current CTC cannot be negative'),\n                indicator: 'red'\n            });\n            $(this).val('');\n            return;\n        }\n    });\n    \n    // Expected CTC validation\n    $(document).on('blur', 'input[data-fieldname=\"employment_expected_ctc\"]', function() {\n        const expectedCtc = parseFloat($(this).val());\n        if (isNaN(expectedCtc)) return;\n        \n        if (expectedCtc < 0) {\n            frappe.msgprint({\n                title: __('Invalid CTC'),\n                message: __('Expected CTC cannot be negative'),\n                indicator: 'red'\n            });\n            $(this).val('');\n            return;\n        }\n        \n        // Check against current CTC if provided\n        const currentCtc = parseFloat($('input[data-fieldname=\"employment_current_ctc\"]').val());\n        if (!isNaN(currentCtc) && currentCtc > 0) {\n            if (expectedCtc < currentCtc * 0.8) {\n                frappe.msgprint({\n                    title: __('Warning'),\n                    message: __('Expected CTC is significantly lower than Current CTC. Please verify.'),\n                    indicator: 'orange'\n                });\n            }\n        }\n    });\n    \n    // 6. Employment History - Notice Period validation\n    $(document).on('blur', 'input[data-fieldname=\"employment_notice_period\"]', function() {\n        const noticePeriod = parseInt($(this).val());\n        if (isNaN(noticePeriod)) return;\n        \n        if (noticePeriod < 0) {\n            frappe.msgprint({\n                title: __('Invalid Notice Period'),\n                message: __('Notice Period cannot be negative'),\n                indicator: 'red'\n            });\n            $(this).val('0');\n            return;\n        }\n        \n        if (noticePeriod > 180) {\n            frappe.msgprint({\n                title: __('Invalid Notice Period'),\n                message: __('Notice Period cannot exceed 180 days'),\n                indicator: 'red'\n            });\n            $(this).focus();\n            return;\n        }\n    });\n    \n    // Employment dates validation\n    $(document).on('change', 'input[data-fieldname=\"employment_start_date\"]', function() {\n        const startDate = $(this).val();\n        const endDate = $('input[data-fieldname=\"employment_end_date\"]').val();\n        \n        if (startDate && endDate && startDate === endDate) {\n            frappe.msgprint({\n                title: __('Invalid Date'),\n                message: __('Start Date and End Date cannot be the same'),\n                indicator: 'red'\n            });\n            $(this).val('');\n        }\n    });\n\n    $(document).on('change', 'input[data-fieldname=\"employment_end_date\"]', function() {\n        const startDate = $('input[data-fieldname=\"employment_start_date\"]').val();\n        const endDate = $(this).val();\n        \n        if (startDate && endDate) {\n            if (startDate === endDate) {\n                frappe.msgprint({\n                    title: __('Invalid Date'),\n                    message: __('Start Date and End Date cannot be the same'),\n                    indicator: 'red'\n                });\n                $(this).val('');\n                return;\n            }\n            const start = new Date(startDate);\n            const end = new Date(endDate);\n            \n            if (end < start) {\n                frappe.msgprint({\n                    title: __('Invalid Date'),\n                    message: __('End Date cannot be before Start Date'),\n                    indicator: 'red'\n                });\n                $(this).val('');\n                return;\n            }\n            \n            // Check if end date is in the future\n            const today = new Date();\n            today.setHours(0, 0, 0, 0);\n            if (end > today) {\n                frappe.msgprint({\n                    title: __('Warning'),\n                    message: __('End Date is in the future. If you are still employed, leave this field blank.'),\n                    indicator: 'orange'\n                });\n            }\n        }\n    });\n    \n    // 10. Portfolio URL Validation\n    $(document).on('blur', 'input[data-fieldname=\"portfolio\"]', function() {\n        const url = $(this).val().trim();\n        if (!url) return; // Optional field\n        \n        // Basic URL validation\n        const urlPattern = /^(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w \\.-]*)*\\/?$/;\n        if (!urlPattern.test(url)) {\n            frappe.msgprint({\n                title: __('Invalid URL'),\n                message: __('Please enter a valid URL (e.g., https://example.com)'),\n                indicator: 'red'\n            });\n            $(this).focus();\n            return;\n        }\n        \n        // Ensure it starts with http:// or https://\n        if (!url.startsWith('http://') && !url.startsWith('https://')) {\n            const correctedUrl = 'https://' + url;\n            $(this).val(correctedUrl);\n            frappe.msgprint({\n                title: __('URL Corrected'),\n                message: __('Added https:// to your URL'),\n                indicator: 'blue'\n            });\n        }\n    });\n    \n    // 11. Degree/Qualification validation\n    $(document).on('blur', 'input[data-fieldname=\"degree\"]', function() {\n        const degree = $(this).val().trim();\n        if (!degree) return; // Optional field\n        \n        if (degree.length < 2) {\n            frappe.msgprint({\n                title: __('Invalid Degree'),\n                message: __('Degree must be at least 2 characters'),\n                indicator: 'red'\n            });\n            $(this).focus();\n            return;\n        }\n    });\n    \n    // 12. Pre-Submit Validation\n    $(document).on('submit', '.web-form', function(e) {\n        let errors = [];\n        \n        // Check required fields\n        const applicantName = $('input[data-fieldname=\"applicant_name\"]').val();\n        const email = $('input[data-fieldname=\"email_id\"]').val();\n        const phone = $('input[data-fieldname=\"phone_number\"]').val();\n        const maritalStatus = $('select[data-fieldname=\"marital_status\"]').val();\n        const cityState = $('input[data-fieldname=\"city_state\"]').val();\n        const jobOpening = $('input[data-fieldname=\"job_requisition\"]').val();\n        const applicationDate = $('input[data-fieldname=\"application_date\"]').val();\n        const totalExperience = $('input[data-fieldname=\"total_experience\"]').val();\n        const source = $('select[data-fieldname=\"source\"]').val();\n        \n        if (!applicantName || applicantName.trim().length < 2) {\n            errors.push('Applicant Name is required (minimum 2 characters)');\n        }\n        \n        if (!email || !email.includes('@')) {\n            errors.push('Valid Email Address is required');\n        }\n        \n        if (!phone || phone.trim().length < 10) {\n            errors.push('Valid Phone Number is required (minimum 10 digits)');\n        }\n        \n        if (!maritalStatus) {\n            errors.push('Marital Status is required');\n        }\n        \n        if (!cityState || cityState.trim().length < 2) {\n            errors.push('City / State is required');\n        }\n        \n        if (!jobOpening) {\n            errors.push('Job Opening is required');\n        }\n        \n        if (!applicationDate) {\n            errors.push('Application Date is required');\n        }\n        \n        if (!totalExperience) {\n            errors.push('Total Experience is required');\n        }\n        \n        if (!source) {\n            errors.push('Source is required');\n        }\n        \n        // Check resume attachment\n        const resumeInput = $('input[data-fieldname=\"resume_attachment\"]')[0];\n        const hasResume = resumeInput && (resumeInput.files.length > 0 || $(resumeInput).attr('data-file-url'));\n        if (!hasResume) {\n            errors.push('Resume/CV is required');\n        } else if (resumeInput.files.length > 0) {\n            // Validate the file type before submit\n            const file = resumeInput.files[0];\n            const fileName = file.name.toLowerCase();\n            const fileExtension = fileName.substring(fileName.lastIndexOf('.'));\n            const allowedExtensions = ['.pdf', '.doc', '.docx'];\n            \n            if (!allowedExtensions.includes(fileExtension)) {\n                errors.push('Resume/CV must be PDF or Word document (.pdf, .doc, .docx). Current: ' + file.name);\n            }\n            \n            // Also check MIME type\n            const allowedMimeTypes = [\n                'application/pdf',\n                'application/msword',\n                'application/vnd.openxmlformats-officedocument.wordprocessingml.document'\n            ];\n            \n            if (!allowedMimeTypes.includes(file.type)) {\n                errors.push('Invalid resume file type detected. Only PDF and Word documents are allowed.');\n            }\n        }\n        \n        // If there are errors, show them and prevent submit\n        if (errors.length > 0) {\n            e.preventDefault();\n            frappe.msgprint({\n                title: __('Validation Errors'),\n                message: '<ul><li>' + errors.join('</li><li>') + '</li></ul>',\n                indicator: 'red'\n            });\n            return false;\n        }\n        waitForWebForm(function() {\n            function setJobRequisition() {\n                if (!frappe.web_form) return false;\n                \n                try {\n                    // CRITICAL: Set job_requisition (this is the required field)\n                    if (frappe.web_form.doc && jobTitle) {\n                        frappe.web_form.doc.job_requisition = jobTitle;\n                        console.log('\u2705 Set job_requisition in doc:', jobTitle);\n                    }\n                    \n                    // Also set job_title for compatibility\n                    if (frappe.web_form.doc && jobTitle) {\n                        frappe.web_form.doc.job_title = jobTitle;\n                    }\n                    \n                    if (frappe.web_form.doc && sourceValue) {\n                        frappe.web_form.doc.source = sourceValue;\n                    }\n                    \n                    // Set via web form API - job_requisition (the actual form field)\n                    if (frappe.web_form.set_value) {\n                        if (jobTitle) {\n                            frappe.web_form.set_value('job_requisition', jobTitle);\n                            frappe.web_form.set_value('job_title', jobTitle);\n                        }\n                        if (sourceValue) {\n                            frappe.web_form.set_value('source', sourceValue);\n                        }\n                    }\n                    \n                    // Set via field if available\n                    if (frappe.web_form.fields_dict) {\n                        // Set job_requisition field (the visible form field)\n                        if (frappe.web_form.fields_dict.job_requisition && jobTitle) {\n                            const field = frappe.web_form.fields_dict.job_requisition;\n                            if (field) {\n                                if (field.set_value) {\n                                    field.set_value(jobTitle);\n                                }\n                                if (field.$input) {\n                                    field.$input.val(jobTitle);\n                                    field.$input.trigger('change');\n                                }\n                            }\n                        }\n                        // Also set job_title if field exists\n                        if (frappe.web_form.fields_dict.job_title && jobTitle) {\n                            const field = frappe.web_form.fields_dict.job_title;\n                            if (field && field.set_value) {\n                                field.set_value(jobTitle);\n                            }\n                        }\n                        if (frappe.web_form.fields_dict.source && sourceValue) {\n                            const field = frappe.web_form.fields_dict.source;\n                            if (field) {\n                                if (field.set_value) {\n                                    field.set_value(sourceValue);\n                                }\n                                if (field.df) {\n                                    field.df.read_only = 1;\n                                }\n                                if (field.$input) {\n                                    field.$input.val(sourceValue);\n                                    field.$input.prop('disabled', true);\n                                    field.$input.trigger('change');\n                                }\n                                if (field.refresh) {\n                                    field.refresh();\n                                }\n                            }\n                        }\n                    }\n                    \n                    return true;\n                } catch (e) {\n                    console.error('\u274c Error setting job_requisition:', e);\n                    return false;\n                }\n            }\n            \n            // Set immediately\n            setJobRequisition();\n            \n            // Retry a few times\n            let attempts = 0;\n            const retry = setInterval(function() {\n                attempts++;\n                if (setJobRequisition() || attempts >= 5) {\n                    clearInterval(retry);\n                }\n            }, 300);\n            \n            // CRITICAL: Ensure job_requisition before submit\n            $(document).on('submit', '.web-form', function(e) {\n                if (frappe.web_form && frappe.web_form.doc) {\n                    if (jobTitle) {\n                        frappe.web_form.doc.job_requisition = jobTitle;\n                        frappe.web_form.doc.job_title = jobTitle;\n                        console.log('\u2705 Set job_requisition before submit:', jobTitle);\n                    }\n                    if (sourceValue) {\n                        frappe.web_form.doc.source = sourceValue;\n                    }\n                }\n            });\n            \n            // Intercept save method safely\n            if (frappe.web_form && frappe.web_form.save) {\n                const originalSave = frappe.web_form.save.bind(frappe.web_form);\n                frappe.web_form.save = function() {\n                    if (this.doc) {\n                        if (jobTitle) {\n                            this.doc.job_requisition = jobTitle;\n                            this.doc.job_title = jobTitle;\n                        }\n                        if (sourceValue) {\n                            this.doc.source = sourceValue;\n                        }\n                    }\n                    return originalSave();\n                };\n            }\n        });\n    });\n});",
 "condition_json": "[]",
 "creation": "2016-09-10 02:53:16.598314",
 "doc_type": "Job Applicant",
 "docstatus": 0,
 "doctype": "Web Form",
 "idx": 0,
 "introduction_text": "",
 "is_standard": 1,
 "list_columns": [],
 "login_required": 0,
 "max_attachment_size": 0,
 "modified": "2026-02-05 19:11:06.814234",
 "modified_by": "Administrator",
 "module": "Alpinos Development",
 "name": "job-application",
 "owner": "Administrator",
 "published": 1,
 "route": "job-application",
 "show_attachments": 0,
 "show_list": 0,
 "show_sidebar": 1,
 "success_message": "Thank you for applying.",
 "success_url": "/jobs",
 "title": "Job Application",
 "web_form_fields": [
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "applicant_name",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Applicant Name",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "email_id",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Email Address",
   "max_length": 0,
   "max_value": 0,
   "options": "Email",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "phone_number",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Phone Number",
   "max_length": 0,
   "max_value": 0,
   "options": "Phone",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "marital_status",
   "fieldtype": "Select",
   "hidden": 0,
   "label": "Marital Status",
   "max_length": 0,
   "max_value": 0,
   "options": "\nSingle\nMarried\nDivorced\nWidowed",
   "precision": "",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "city_state",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "City / State",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "resume_attachment",
   "fieldtype": "Attach",
   "hidden": 0,
   "label": "Resume/CV",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "work_details_section",
   "fieldtype": "Section Break",
   "hidden": 0,
   "label": "Work Details",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "job_requisition",
   "fieldtype": "Link",
   "hidden": 0,
   "label": "Job Opening",
   "max_length": 0,
   "max_value": 0,
   "options": "Job Opening",
   "precision": "",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "application_date",
   "fieldtype": "Date",
   "hidden": 0,
   "label": "Application Date",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "total_experience",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Total Experience",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "source",
   "fieldtype": "Link",
   "hidden": 0,
   "label": "Source",
   "max_length": 0,
   "max_value": 0,
   "options": "Job Applicant Source",
   "precision": "",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "portfolio",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Portfolio",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "expected_date_of_joining",
   "fieldtype": "Date",
   "hidden": 0,
   "label": "Expected Date of Joining",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "employment_history_section",
   "fieldtype": "Section Break",
   "hidden": 0,
   "label": "Employment History",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "employment_company_name",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Company Name",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "employment_designation",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Designation",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "employment_current_ctc",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Current CTC / Annum",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "employment_expected_ctc",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Expected CTC / Annum",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "employment_start_date",
   "fieldtype": "Date",
   "hidden": 0,
   "label": "Start Date",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "employment_end_date",
   "fieldtype": "Date",
   "hidden": 0,
   "label": "End Date",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "employment_reason_for_leaving",
   "fieldtype": "Small Text",
   "hidden": 0,
   "label": "Reason for Leaving",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "employment_notice_period",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Notice Period",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "qualification_section",
   "fieldtype": "Section Break",
   "hidden": 0,
   "label": "Qualification",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "degree",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Degree",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  }
 ]
}